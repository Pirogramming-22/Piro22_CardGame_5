{% extends 'base.html' %}
{% load static %}

{%block content%}
<div class="game_container">
    <div class="game-card">
        <h2>{{ match.player1.username }} VS {{ match.player2.username }}</h2>
        {% if match.status == 'pending' and match.player1.username == user.username %}

            <p>ì§„í–‰ì¤‘...</p>
            <p>ë‚˜: {{ match.player1_choice }}</p>

            <form action="{% url 'game:delete_game' match.pk %}" method="post">
                {% csrf_token %}
                <button class="counter" type="submit">ê²Œì„ì·¨ì†Œ</button>
            </form>
            <a href="{% url 'game:gameHistory' %}" class="mx-2">

                <button type="button" class="game_history">ì „ì ëª©ë¡</button>
            </a>
        {% elif match.status == 'pending' and match.player1.username != user.username %}
            <form action="{% url 'game:counterattack' match.pk %}" method="post">
                {% csrf_token %}
                <button class="counter" type="submit">ëŒ€ì‘í•˜ê¸°</button>
            </form>
            <a href="{% url 'game:gameHistory' %}" class="mx-2">
                <button type="button" class="game_history">ì „ì ëª©ë¡</button>
            </a>
        {% elif match.status == 'completed' %}
            <p>ìˆ«ìê°€ ì‘ì€ ì‚¬ëŒì´ ì´ê¹ë‹ˆë‹¤.</p>
            <p>{{ match.player1.username }}: {{ match.player1_choice }}</p>
            <p>{{ match.player2.username }}: {{ match.player2_choice }}</p>
            {% if match.status == 'completed' and match.winner == user %}
            <p>ê²°ê³¼: ğŸ† ìŠ¹ë¦¬ ğŸ†</p>
            {% elif match.status == 'completed' and match.winner == None %}
            <p>ê²°ê³¼: ë¬´ìŠ¹ë¶€</p>
            {% elif match.status == 'completed' and match.winner != user %}
            <p>ê²°ê³¼: ğŸ˜¢ íŒ¨ë°° ğŸ˜¢</p>
            {% endif %}
        
            <hr>
            {% if match.status == 'completed' and match.winner == user %}
            <p>ì ìˆ˜: {{ point }}</p>
            {% elif match.status == 'completed' and match.winner == None %}
            <p>ì ìˆ˜: {{ point }}</p>
            {% elif match.status == 'completed' and match.winner != user %}
            <p>ì ìˆ˜: -{{ point }}</p>
            {% endif %}
            <a href="{% url 'game:gameHistory' %}" class="mx-2">
                <button type="button" class="game_history">ì „ì ëª©ë¡</button>
            </a>
        {% endif %}
    </div>
</div>
{%endblock%}
